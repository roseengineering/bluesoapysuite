---
  - set_fact:
      fs_path: "{{ fs_path | default('/srv') }}"

  # apt

  - become: yes
    apt:
      name:
      - python3-dbus
      - mosquitto

  # pip

  - become: yes
    pip:
      name:
      - bluezero
      - paho-mqtt

  # ble

  - become: yes
    copy:
      dest: /etc/dbus-1/system.d/ukBaz.bluezero.conf 
      content: |
        <?xml version="1.0" encoding="UTF-8"?>
        <!DOCTYPE busconfig PUBLIC 
         "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
         "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
        <busconfig>
          <policy context="default">
            <allow own="ukBaz.bluezero"/>
            <allow send_destination="ukBaz.bluezero"
                   send_interface="org.freedesktop.DBus.Introspectable"/>
            <allow send_type="method_call" log="true"/>
          </policy>
        </busconfig>

  # bluesoapy

  - become: yes
    copy:
      mode: 0755
      dest: /usr/local/bin/mqproxy
      content: !!binary |
        IyEvdXNyL2Jpbi9weXRob24zCmZyb20gYmx1ZXplcm8gaW1wb3J0IHBlcmlw
        aGVyYWwKClVBUlRfU0VSSVZDRSA9ICc2RTQwMDAwMS1CNUEzLUYzOTMtRTBB
        OS1FNTBFMjREQ0NBOUUnClJYX0NIQVJBQ1RFUklTVElDID0gJzZFNDAwMDAy
        LUI1QTMtRjM5My1FMEE5LUU1MEUyNERDQ0E5RScKVFhfQ0hBUkFDVEVSSVNU
        SUMgPSAnNkU0MDAwMDMtQjVBMy1GMzkzLUUwQTktRTUwRTI0RENDQTlFJwoK
        Y2xhc3MgVWFydFNlcnZpY2U6CiAgICBkZWYgX19pbml0X18oc2VsZiwgb25y
        ZWFkLCBhbGlhcz0nUlBpX1VBUlQnKToKICAgICAgICBzZWxmLm9ucmVhZCA9
        IG9ucmVhZAogICAgICAgIHNlbGYuYXBwID0gcGVyaXBoZXJhbC5BcHBsaWNh
        dGlvbigpCiAgICAgICAgc2VsZi5ibGVfdWFydCA9IHBlcmlwaGVyYWwuU2Vy
        dmljZShVQVJUX1NFUklWQ0UsIFRydWUpCiAgICAgICAgc2VsZi5yeF91YXJ0
        ID0gcGVyaXBoZXJhbC5DaGFyYWN0ZXJpc3RpYyhSWF9DSEFSQUNURVJJU1RJ
        QywKICAgICAgICAgICAgWyd3cml0ZScsICd3cml0ZS13aXRob3V0LXJlc3Bv
        bnNlJ10sIHNlbGYuYmxlX3VhcnQpCiAgICAgICAgc2VsZi50eF91YXJ0ID0g
        cGVyaXBoZXJhbC5DaGFyYWN0ZXJpc3RpYyhUWF9DSEFSQUNURVJJU1RJQywK
        ICAgICAgICAgICAgWydub3RpZnknXSwgc2VsZi5ibGVfdWFydCkKICAgICAg
        ICBzZWxmLnJ4X3VhcnQuYWRkX3dyaXRlX2V2ZW50KHNlbGYudWFydF9wcmlu
        dCkKICAgICAgICBzZWxmLmJsZV91YXJ0LmFkZF9jaGFyYWN0ZXJpc3RpYyhz
        ZWxmLnJ4X3VhcnQpCiAgICAgICAgc2VsZi5ibGVfdWFydC5hZGRfY2hhcmFj
        dGVyaXN0aWMoc2VsZi50eF91YXJ0KQogICAgICAgIHNlbGYuYXBwLmFkZF9z
        ZXJ2aWNlKHNlbGYuYmxlX3VhcnQpCiAgICAgICAgc2VsZi5hcHAuZG9uZ2xl
        LmFsaWFzID0gYWxpYXMKICAgIGRlZiB1YXJ0X3ByaW50KHNlbGYsIGRhdGEp
        OgogICAgICAgIHZhbHVlID0gJycuam9pbihjaHIobGV0dGVyKSBmb3IgbGV0
        dGVyIGluIGRhdGEpCiAgICAgICAgc2VsZi5vbnJlYWQodmFsdWUpCiAgICBk
        ZWYgc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5hcHAuc3RhcnQoKQoKIyMj
        IyMjIyMjIyMjIyMjIyMjIyMjIwoKaW1wb3J0IGFyZ3BhcnNlCmltcG9ydCBw
        YWhvLm1xdHQuY2xpZW50IGFzIG1xdHQKZnJvbSBkYXRldGltZSBpbXBvcnQg
        ZGF0ZXRpbWUKCnBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKAog
        ICAgZm9ybWF0dGVyX2NsYXNzPWFyZ3BhcnNlLkFyZ3VtZW50RGVmYXVsdHNI
        ZWxwRm9ybWF0dGVyKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItLWJyb2tlciIs
        IGRlZmF1bHQ9IjEyNy4wLjAuMSIsIGhlbHA9J2Jyb2tlciBob3N0JykKcGFy
        c2VyLmFkZF9hcmd1bWVudCgiLS1wb3J0IiwgZGVmYXVsdD0xODgzLCBoZWxw
        PSdicm9rZXIgcG9ydCcpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0ta2VlcGFs
        aXZlIiwgZGVmYXVsdD02MCwgaGVscD0nYnJva2VyIGtlZXAgYWxpdmUnKQpw
        YXJzZXIuYWRkX2FyZ3VtZW50KCItLXRvcGljIiwgZGVmYXVsdD0iZi90eCIs
        IGhlbHA9J2NvbW1hbmQgdG9waWMnKQoKZGVmIG1haW4oKToKICAgIGRlZiBv
        bmNvbm5lY3QoY2xpZW50LCB1c2VyZGF0YSwgZmxhZ3MsIHJjKToKICAgICAg
        ICBjbGllbnQuc3Vic2NyaWJlKCcjJykKICAgIGRlZiBvbndyaXRlKHZhbHVl
        KToKICAgICAgICBjbGllbnQucHVibGlzaChhcmdzLnRvcGljLCB2YWx1ZSkK
        ICAgIGRlZiBvbm1lc3NhZ2UoY2xpZW50LCB1c2VyZGF0YSwgbXNnKToKICAg
        ICAgICBwYXlsb2FkID0gbXNnLnBheWxvYWQuZGVjb2RlKCdsYXRpbicpCiAg
        ICAgICAgdHMgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgnJUg6JU06JVMn
        KQogICAgICAgIHVhcnQudHhfdWFydC5zZW5kX25vdGlmeV9ldmVudChmJ3t0
        c30ge21zZy50b3BpY30ge3BheWxvYWR9JykKICAgIHVhcnQgPSBVYXJ0U2Vy
        dmljZShvbndyaXRlKQogICAgY2xpZW50ID0gbXF0dC5DbGllbnQoKQogICAg
        Y2xpZW50Lm9uX2Nvbm5lY3QgPSBvbmNvbm5lY3QKICAgIGNsaWVudC5vbl9t
        ZXNzYWdlID0gb25tZXNzYWdlCiAgICBjbGllbnQuY29ubmVjdChhcmdzLmJy
        b2tlciwgYXJncy5wb3J0LCBhcmdzLmtlZXBhbGl2ZSkKICAgIGNsaWVudC5s
        b29wX3N0YXJ0KCkKICAgIHVhcnQuc3RhcnQoKQoKaWYgX19uYW1lX18gPT0g
        J19fbWFpbl9fJzoKICAgICMgcHJveHkgYmxlIHVhcnQgdG8gbXF0dCBicm9r
        ZXIKICAgICMgdGhpcyBuZWVkcyB0byBydW4gYXMgcm9vdAogICAgYXJncyA9
        IHBhcnNlci5wYXJzZV9hcmdzKCkKICAgIG1haW4oKQoK


  - become: yes
    copy:
      mode: 0755
      dest: /usr/local/bin/mqsoapy
      content: !!binary |
        IyEvdXNyL2Jpbi9weXRob24zCgppbXBvcnQgb3MsIHN5cywgdGltZQppbXBv
        cnQgc3RydWN0CmltcG9ydCBhcmdwYXJzZQppbXBvcnQgbnVtcHkgYXMgbnAK
        aW1wb3J0IHBhaG8ubXF0dC5jbGllbnQgYXMgbXF0dAppbXBvcnQgU29hcHlT
        RFIKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBTb2FweVNE
        UiBpbXBvcnQgU09BUFlfU0RSX1JYLCBTT0FQWV9TRFJfQ0YzMgoKcmVzdGFy
        dF9zZWNvbmRzID0gMTAKCnBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFy
        c2VyKAogICAgZm9ybWF0dGVyX2NsYXNzPWFyZ3BhcnNlLkFyZ3VtZW50RGVm
        YXVsdHNIZWxwRm9ybWF0dGVyKQoKcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1i
        cm9rZXIiLCBkZWZhdWx0PSIxMjcuMC4wLjEiLCBoZWxwPSdicm9rZXIgaG9z
        dCcpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0tcG9ydCIsIGRlZmF1bHQ9MTg4
        MywgdHlwZT1pbnQsIGhlbHA9J2Jyb2tlciBwb3J0JykKcGFyc2VyLmFkZF9h
        cmd1bWVudCgiLS1rZWVwYWxpdmUiLCBkZWZhdWx0PTYwLCB0eXBlPWludCwg
        aGVscD0nYnJva2VyIGtlZXBhbGl2ZSBpbiBzZWNvbmRzJykKcGFyc2VyLmFk
        ZF9hcmd1bWVudCgiLS10b3BpYyIsIGRlZmF1bHQ9ImYvdHgiLCBoZWxwPSdt
        cXR0IHRvcGljIGZvciBjb21tYW5kJykKcGFyc2VyLmFkZF9hcmd1bWVudCgi
        LS1wcHMtdG9waWMiLCBkZWZhdWx0PSJwcHMiLCBoZWxwPSdtcXR0IHRvcGlj
        IGZvciBncHMgcHBzIHRpbWUnKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItLWRy
        aXZlciIsIGhlbHA9J25hbWUgb2YgZHJpdmVyJykKcGFyc2VyLmFkZF9hcmd1
        bWVudCgiLS1wYWNrZXQtc2l6ZSIsIGRlZmF1bHQ9MTAyNCwgdHlwZT1pbnQs
        IGhlbHA9J3BhY2tldCBzaXplJykKcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1m
        cmVxIiwgdHlwZT1ucC5mbG9hdCwgaGVscD0iY2VudGVyIGZyZXF1ZW5jeSBp
        biBoZXJ0eiIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0tcmF0ZSIsIHR5cGU9
        bnAuZmxvYXQsIGhlbHA9InNhbXBsZSByYXRlIGluIGhlcnR6IikKcGFyc2Vy
        LmFkZF9hcmd1bWVudCgiLS1nYWluIiwgdHlwZT1ucC5mbG9hdCwgaGVscD0i
        ZnJvbnQgZW5kIGdhaW4gaW4gZEIiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCIt
        LWFnYyIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsIGhlbHA9ImVuYWJsZSBBR0Mi
        KQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItLW5vYnJva2VyIiwgYWN0aW9uPSJz
        dG9yZV90cnVlIiwgaGVscD0iZGlzYWJsZSBtcXR0IGJyb2tlciIpCnBhcnNl
        ci5hZGRfYXJndW1lbnQoIi0tZHVtYiIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIs
        IGhlbHA9ImR1bWIgdGVybWluYWwiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCIt
        LW91dHB1dCIsIGRlZmF1bHQ9Im91dCIsIGhlbHA9IndyaXRlIENGMzIgc2Ft
        cGxlcyB0byBmaWxlIikKcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1ub3dhdmUi
        LCBhY3Rpb249InN0b3JlX3RydWUiLCBoZWxwPSJkaXNhYmxlIFdBViBoZWFk
        ZXIiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItLW1ldGVyIiwgYWN0aW9uPSJz
        dG9yZV90cnVlIiwgaGVscD0iZW5hYmxlIGNvbnNvbGUgcGVhayBtZXRlciIp
        CnBhcnNlci5hZGRfYXJndW1lbnQoIi0tcGF1c2UiLCBhY3Rpb249InN0b3Jl
        X3RydWUiLCBoZWxwPSJwYXVzZSBvdXRwdXQiKQpwYXJzZXIuYWRkX2FyZ3Vt
        ZW50KCItLXJlZnJlc2giLCBkZWZhdWx0PTUsIHR5cGU9aW50LCBoZWxwPSJw
        ZWFrIG1ldGVyIHJlZnJlc2ggaW4gc2Vjb25kcyIpCnBhcnNlci5hZGRfYXJn
        dW1lbnQoIi0tcmVmcmVzaC1wcHMiLCBkZWZhdWx0PTEwLCB0eXBlPWludCwg
        aGVscD0ncHBzIHJlZnJlc2ggaW4gc2Vjb25kcycpCiAKIyBhcmdTdHJpbmcK
        cGFyc2VyLmFkZF9hcmd1bWVudCgiLS1kaXJlY3Qtc2FtcCIsIGhlbHA9IjA9
        b2ZmLCAxIG9yIGk9SSwgMiBvciBxPVEgY2hhbm5lbCIpCnBhcnNlci5hZGRf
        YXJndW1lbnQoIi0taXEtc3dhcCIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsIGhl
        bHA9InN3YXAgSVEgc2lnbmFscyIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0t
        Ymlhc3RlZSIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsIGhlbHA9ImVuYWJsZSBi
        aWFzIHRlZSIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0tZGlnaXRhbC1hZ2Mi
        LCBhY3Rpb249InN0b3JlX3RydWUiLCBoZWxwPSJlbmFibGUgZGlnaXRhbCBB
        R0MiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItLW9mZnNldC10dW5lIiwgYWN0
        aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iZW5hYmxlIG9mZnNldCB0dW5lIikK
        CgpkZWYgZ2VuX3RvcGljKG5hbWU9Tm9uZSk6CiAgICBkID0gYXJncy50b3Bp
        Yy5zcGxpdCgnLycpWzotMV0KICAgIGlmIG5hbWUgaXMgbm90IE5vbmU6CiAg
        ICAgICAgZC5hcHBlbmQobmFtZSkKICAgIHJldHVybiAnLycuam9pbihkKQoK
        CmRlZiB0b19mbG9hdChwYXJhbSk6CiAgICB0cnk6CiAgICAgICAgcmV0dXJu
        IGZsb2F0KHBhcmFtKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAg
        cGFzcwoKIyMjCgpkZWYgb25faW5mbyhwYXJhbSk6CiAgICBjaGFuID0gMAog
        ICAgZm9yIHIgaW4gcmFkaW8uZ2V0U2FtcGxlUmF0ZVJhbmdlKFNPQVBZX1NE
        Ul9SWCwgY2hhbik6CiAgICAgICBwYXlsb2FkID0gJ3JhdGU6IHs6LjNmfSBL
        SHonLmZvcm1hdChyLm1pbmltdW0oKSAvIDFlMykKICAgICAgIGluZm8ocGF5
        bG9hZCkKICAgIGZvciByIGluIHJhZGlvLmdldEZyZXF1ZW5jeVJhbmdlKFNP
        QVBZX1NEUl9SWCwgY2hhbik6CiAgICAgICBwYXlsb2FkID0gJ2ZyZXE6IHs6
        LjZmfSAtIHs6LjZmfSBNSHonLmZvcm1hdCgKICAgICAgICAgICByLm1pbmlt
        dW0oKSAvIDFlNiwgci5tYXhpbXVtKCkgLyAxZTYpCiAgICAgICBpbmZvKHBh
        eWxvYWQpCiAgICByID0gcmFkaW8uZ2V0R2FpblJhbmdlKFNPQVBZX1NEUl9S
        WCwgY2hhbikKICAgIHBheWxvYWQgPSAnZ2FpbjogezouMmZ9IC0gezouMmZ9
        IGRCJy5mb3JtYXQoci5taW5pbXVtKCksIHIubWF4aW11bSgpKQogICAgaW5m
        byhwYXlsb2FkKQoKCmRlZiBvbl9mYXRhbChwYXJhbSk6CiAgICBnbG9iYWwg
        ZmF0YWwKICAgIGlmIHBhcmFtLmxvd2VyKCkgPT0gInRydWUiOgogICAgICAg
        IGZhdGFsID0gVHJ1ZQogICAgICAgIGluZm8oJ2ZhdGFsIGtpbGxpbmcnKQog
        ICAgZWxzZToKICAgICAgICBpbmZvKCdiYWQgZmF0YWwgY29tbWFuZCcpCgoK
        ZGVmIG9uX2tpbGwocGFyYW0pOgogICAgZ2xvYmFsIGtpbGxlZAogICAgaWYg
        cGFyYW0ubG93ZXIoKSA9PSAidHJ1ZSI6CiAgICAgICAga2lsbGVkID0gVHJ1
        ZQogICAgICAgIGluZm8oJ2tpbGxpbmcgc3RyZWFtJykKICAgIGVsc2U6CiAg
        ICAgICAgaW5mbygnYmFkIGtpbGwgY29tbWFuZCcpCgoKZGVmIG9uX3BhdXNl
        KHBhcmFtKToKICAgIGdsb2JhbCBwYXVzZWQKICAgIGlmIHBhcmFtOgogICAg
        ICAgIHBhdXNlZCA9IHBhcmFtLmxvd2VyKCkgPT0gInRydWUiCiAgICBicm9r
        ZXIucHVibGlzaChnZW5fdG9waWMoInBhdXNlIiksICdvbicgaWYgcGF1c2Vk
        IGVsc2UgJ29mZicpCgoKZGVmIG9uX3JhdGUocGFyYW0pOgogICAgZ2xvYmFs
        IHJhdGUKICAgIGlmIHBhcmFtOgogICAgICAgIHBhcmFtID0gdG9fZmxvYXQo
        cGFyYW0pCiAgICAgICAgaWYgcGFyYW0gaXMgTm9uZToKICAgICAgICAgICAg
        aW5mbygnYmFkIHNhbXBsZSByYXRlIGNvbW1hbmQnKQogICAgICAgIGVsc2U6
        CiAgICAgICAgICAgIHJhZGlvLnNldFNhbXBsZVJhdGUoU09BUFlfU0RSX1JY
        LCAwLCBwYXJhbSkKICAgIHJhdGUgPSByYWRpby5nZXRTYW1wbGVSYXRlKFNP
        QVBZX1NEUl9SWCwgMCkKICAgIGJyb2tlci5wdWJsaXNoKGdlbl90b3BpYygi
        cmF0ZSIpLCBmJ3tyYXRlLzFlMzouM2Z9IEtIeicpCgoKZGVmIG9uX2ZyZXEo
        cGFyYW0pOgogICAgaWYgcGFyYW06CiAgICAgICAgcGFyYW0gPSB0b19mbG9h
        dChwYXJhbSkKICAgICAgICBpZiBwYXJhbSBpcyBOb25lOgogICAgICAgICAg
        ICBpbmZvKCdiYWQgZnJlcXVlbmN5IGNvbW1hbmQnKQogICAgICAgIGVsc2U6
        CiAgICAgICAgICAgIHJhZGlvLnNldEZyZXF1ZW5jeShTT0FQWV9TRFJfUlgs
        IDAsIHBhcmFtKQogICAgZnJlcSA9IHJhZGlvLmdldEZyZXF1ZW5jeShTT0FQ
        WV9TRFJfUlgsIDApCiAgICBicm9rZXIucHVibGlzaChnZW5fdG9waWMoImZy
        ZXEiKSwgZid7ZnJlcS8xZTY6LjZmfSBNSHonKQoKCmRlZiBvbl9nYWluKHBh
        cmFtKToKICAgIGlmIHBhcmFtOgogICAgICAgIHBhcmFtID0gdG9fZmxvYXQo
        cGFyYW0pCiAgICAgICAgaWYgcGFyYW0gaXMgTm9uZToKICAgICAgICAgICAg
        aW5mbygnYmFkIGdhaW4gY29tbWFuZCcpCiAgICAgICAgZWxzZToKICAgICAg
        ICAgICAgcmFkaW8uc2V0R2FpbihTT0FQWV9TRFJfUlgsIDAsIHBhcmFtKQog
        ICAgZ2FpbiA9IHJhZGlvLmdldEdhaW4oU09BUFlfU0RSX1JYLCAwKQogICAg
        YnJva2VyLnB1Ymxpc2goZ2VuX3RvcGljKCJnYWluIiksIGYne2dhaW46LjNn
        fSBkQicpCgoKZGVmIG9uX2F1dG8ocGFyYW0pOgogICAgaWYgcGFyYW06CiAg
        ICAgICAgcmFkaW8uc2V0R2Fpbk1vZGUoU09BUFlfU0RSX1JYLCAwLCBwYXJh
        bS5sb3dlcigpID09ICJ0cnVlIikKICAgIGFnYyA9IHJhZGlvLmdldEdhaW5N
        b2RlKFNPQVBZX1NEUl9SWCwgMCkKICAgIGJyb2tlci5wdWJsaXNoKGdlbl90
        b3BpYygiYWdjIiksICdvbicgaWYgYWdjIGVsc2UgJ29mZicpCgoKZGVmIG9u
        X3NldHRpbmcoa2V5LCBwYXJhbSk6CiAgICBpZiBwYXJhbToKICAgICAgICBy
        YWRpby53cml0ZVNldHRpbmcoa2V5LCBwYXJhbSkKICAgIHZhbCA9IHJhZGlv
        LnJlYWRTZXR0aW5nKGtleSkKICAgIGJyb2tlci5wdWJsaXNoKGdlbl90b3Bp
        YyhrZXkpLCBzdHIodmFsKSkKCgpkZWYgb25fcHBzKHRzKToKICAgIGlmIHRp
        bWVmaWxlIGFuZCBub3QgcGF1c2VkOgogICAgICAgIHNlYyA9IHNhbXBsZXNf
        dG90YWwgLyByYXRlCiAgICAgICAgZHQgPSBkYXRldGltZS5zdHJwdGltZSh0
        cywgIiVZLSVtLSVkVCVIOiVNOiVTLiVmWiIpCiAgICAgICAgaWYgZHQuc2Vj
        b25kICUgYXJncy5yZWZlc2hfcHBzID09IDA6CiAgICAgICAgICAgIGluZm8o
        dHMpCiAgICAgICAgdGltZWZpbGUud3JpdGUoZiJ7c2VjOi4zZn1cdHtzZWM6
        LjNmfVx0e3RzfVxuIikKICAgICAgICB0aW1lZmlsZS5mbHVzaCgpCgoKZGVm
        IG9uX21lc3NhZ2UoY2xpZW50LCB1c2VyZGF0YSwgbXNnKToKICAgIHBheWxv
        YWQgPSBtc2cucGF5bG9hZC5kZWNvZGUoJ2xhdGluJykuc3RyaXAoKQogICAg
        dHJ5OgogICAgICAgIGlmIHBheWxvYWQgYW5kIG1zZy50b3BpYyA9PSBhcmdz
        LnBwc190b3BpYzoKICAgICAgICAgICAgb25fcHBzKHBheWxvYWQpCiAgICAg
        ICAgaWYgcGF5bG9hZCBhbmQgbXNnLnRvcGljID09IGFyZ3MudG9waWM6CiAg
        ICAgICAgICAgIGNtZCwgXywgcGFyYW0gPSBwYXlsb2FkLnBhcnRpdGlvbign
        ICcpIAogICAgICAgICAgICBwYXJhbSA9IHBhcmFtLnN0cmlwKCkKICAgICAg
        ICAgICAgaWYgY21kID09ICdpJzoKICAgICAgICAgICAgICAgIG9uX2luZm8o
        cGFyYW0pCiAgICAgICAgICAgIGlmIGNtZCA9PSAncCc6CiAgICAgICAgICAg
        ICAgICBvbl9wYXVzZShwYXJhbSkKICAgICAgICAgICAgZWxpZiBjbWQgPT0g
        J2cnOgogICAgICAgICAgICAgICAgb25fZ2FpbihwYXJhbSkKICAgICAgICAg
        ICAgZWxpZiBjbWQgPT0gJ2EnOgogICAgICAgICAgICAgICAgb25fYXV0byhw
        YXJhbSkKICAgICAgICAgICAgZWxpZiBjbWQgPT0gJ3InOgogICAgICAgICAg
        ICAgICAgb25fcmF0ZShwYXJhbSkKICAgICAgICAgICAgZWxpZiBjbWQgPT0g
        J2YnOgogICAgICAgICAgICAgICAgb25fZnJlcShwYXJhbSkKICAgICAgICAg
        ICAgZWxpZiBjbWQgPT0gJ2snOgogICAgICAgICAgICAgICAgb25fa2lsbChw
        YXJhbSkKICAgICAgICAgICAgZWxpZiBjbWQgPT0gJ0snOgogICAgICAgICAg
        ICAgICAgb25fZmF0YWwocGFyYW0pCiAgICAgICAgICAgIGVsaWYgY21kID09
        ICdkcyc6CiAgICAgICAgICAgICAgICBpZiBwYXJhbS5sb3dlcigpID09ICJp
        IjogcGFyYW0gPSAiMSIKICAgICAgICAgICAgICAgIGlmIHBhcmFtLmxvd2Vy
        KCkgPT0gInEiOiBwYXJhbSA9ICIyIgogICAgICAgICAgICAgICAgb25fc2V0
        dGluZygiZGlyZWN0X3NhbXAiLCBwYXJhbSkKICAgICAgICAgICAgZWxpZiBj
        bWQgPT0gJ2lxJzoKICAgICAgICAgICAgICAgIG9uX3NldHRpbmcoImlxX3N3
        YXAiLCBwYXJhbSkKICAgICAgICAgICAgZWxpZiBjbWQgPT0gJ2J0JzoKICAg
        ICAgICAgICAgICAgIG9uX3NldHRpbmcoImJpYXN0ZWUiLCBwYXJhbSkKICAg
        ICAgICAgICAgZWxpZiBjbWQgPT0gJ2RhJzoKICAgICAgICAgICAgICAgIG9u
        X3NldHRpbmcoImRpZ2l0YWxfYWdjIiwgcGFyYW0pCiAgICAgICAgICAgIGVs
        aWYgY21kID09ICdvdCc6CiAgICAgICAgICAgICAgICBvbl9zZXR0aW5nKCJv
        ZmZzZXRfdHVuZSIsIHBhcmFtKQogICAgICAgICAgICBlbHNlOgogICAgICAg
        ICAgICAgICAgaW5mbygndW5rbm93biBjb21tYW5kJykKICAgIGV4Y2VwdCBF
        eGNlcHRpb24gYXMgZToKICAgICAgICBpbmZvKGYiRXhjZXB0aW9uIG9uX21l
        c3NhZ2UoKToge2V9IikKCgpkZWYgb25fY29ubmVjdChjbGllbnQsIHVzZXJk
        YXRhLCBmbGFncywgcmMpOgogICAgY2xpZW50LnN1YnNjcmliZShnZW5fdG9w
        aWMoJyMnKSkKICAgIGNsaWVudC5zdWJzY3JpYmUoYXJncy5wcHNfdG9waWMp
        CgoKIyMjIyMjIyMjIyMjIyMjMwoKCmRlZiBpbmZvKHBheWxvYWQpOgogICAg
        cHJpbnQocGF5bG9hZCwgZmlsZT1zeXMuc3RkZXJyKQogICAgaWYgYnJva2Vy
        OgogICAgICAgIGJyb2tlci5wdWJsaXNoKGdlbl90b3BpYygiaW5mbyIpLCBw
        YXlsb2FkKQoKCmRlZiBsb2dfaGFuZGxlcihsb2dfbGV2ZWwsIGxvZ19tZXNz
        YWdlKToKICAgIGlmIGJyb2tlcjoKICAgICAgICBicm9rZXIucHVibGlzaChn
        ZW5fdG9waWMoImxvZyIpLCBsb2dfbWVzc2FnZSkKCgpkZWYgd2F2X2hlYWRl
        cihyYXRlLCBjaGFubmVscz0yLCBzYW1wbGVfYnl0ZXM9NCk6CiAgICByYXRl
        ID0gaW50KHJhdGUpCiAgICBkYXRhX2lkID0gYidkYXRhJwogICAgZGF0YV9z
        aXplID0gMHg4MDAwMDAwMAogICAgcmlmZl9pZCA9IGInUklGRicKICAgIHJp
        ZmZfZm9ybWF0ID0gYidXQVZFJwogICAgZm10X2lkID0gYidmbXQgJwogICAg
        Zm10X3NpemUgPSAxNgogICAgZm10X2Zvcm1hdCA9IDMgICAgIyBJRUVFX0ZM
        T0FUCiAgICBidWYgPSBzdHJ1Y3QucGFjaygnPDRzSTRzJywgcmlmZl9pZCwg
        ZGF0YV9zaXplICsgMjAgKyBmbXRfc2l6ZSwgcmlmZl9mb3JtYXQpCiAgICBi
        dWYgKz0gc3RydWN0LnBhY2soJzw0c0lISCcsIGZtdF9pZCwgZm10X3NpemUs
        IGZtdF9mb3JtYXQsIGNoYW5uZWxzKQogICAgYnVmICs9IHN0cnVjdC5wYWNr
        KCc8SUlISCcsCiAgICAgICAgcmF0ZSwgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAjIDMyLWJpdAogICAgICAgIHJhdGUgKiBjaGFubmVscyAqIHNhbXBs
        ZV9ieXRlcywgIyAzMi1iaXQKICAgICAgICBjaGFubmVscyAqIHNhbXBsZV9i
        eXRlcywKICAgICAgICBzYW1wbGVfYnl0ZXMgKiA4KQogICAgYnVmICs9IHN0
        cnVjdC5wYWNrKCc8NHNJJywgZGF0YV9pZCwgZGF0YV9zaXplKQogICAgcmV0
        dXJuIGJ1ZgoKCmRlZiByYWRpb19jb25uZWN0KCk6CiAgICBnbG9iYWwgcmFk
        aW8KICAgIGRyaXZlcnMgPSBbIGRbJ2RyaXZlciddIGZvciBkIGluIFNvYXB5
        U0RSLkRldmljZS5lbnVtZXJhdGUoKSBdCiAgICBpbmZvKGYiRm91bmQgZHJp
        dmVyczoge2RyaXZlcnN9IikKICAgIGt3ID0ge30KICAgIGlmIGFyZ3MuZHJp
        dmVyOgogICAgICAgIGt3Wydkcml2ZXInXSA9IGFyZ3MuZHJpdmVyCiAgICBp
        bmZvKGYiUGFzc2luZyB0aGUgZm9sbG93aW5nIGFyZ3VtZW50czoge2t3fSIp
        CiAgICByYWRpbyA9IFNvYXB5U0RSLkRldmljZShrdykKCgpkZWYgcmFkaW9f
        c2V0dGluZ3MoKToKICAgIGluZm8oZiJJbml0aWFsaXppbmcgcmFkaW8gc2V0
        dGluZ3MiKQogICAgaWYgYXJncy5mcmVxOgogICAgICAgIHJhZGlvLnNldEZy
        ZXF1ZW5jeShTT0FQWV9TRFJfUlgsIDAsIGFyZ3MuZnJlcSkKICAgIGlmIGFy
        Z3MucmF0ZToKICAgICAgICByYWRpby5zZXRTYW1wbGVSYXRlKFNPQVBZX1NE
        Ul9SWCwgMCwgYXJncy5yYXRlKQogICAgcmFkaW8uc2V0R2Fpbk1vZGUoU09B
        UFlfU0RSX1JYLCAwLCBhcmdzLmFnYyk7CiAgICBpZiBhcmdzLmdhaW46CiAg
        ICAgICAgcmFkaW8uc2V0R2FpbihTT0FQWV9TRFJfUlgsIDAsIGFyZ3MuZ2Fp
        bikKICAgIGlmIGFyZ3MuZGlyZWN0X3NhbXA6CiAgICAgICAgcGFyYW0gPSBh
        cmdzLmRpcmVjdF9zYW1wCiAgICAgICAgaWYgcGFyYW0ubG93ZXIoKSA9PSAi
        aSI6IHBhcmFtID0gIjEiCiAgICAgICAgaWYgcGFyYW0ubG93ZXIoKSA9PSAi
        cSI6IHBhcmFtID0gIjIiCiAgICAgICAgcmFkaW8ud3JpdGVTZXR0aW5nKCJk
        aXJlY3Rfc2FtcCIsIHBhcmFtKQogICAgaWYgYXJncy5pcV9zd2FwOgogICAg
        ICAgIHJhZGlvLndyaXRlU2V0dGluZygiaXFfc3dhcCIsICJ0cnVlIikKICAg
        IGlmIGFyZ3MuYmlhc3RlZToKICAgICAgICByYWRpby53cml0ZVNldHRpbmco
        ImJpYXN0ZWUiLCAidHJ1ZSIpCiAgICBpZiBhcmdzLmRpZ2l0YWxfYWdjOgog
        ICAgICAgIHJhZGlvLndyaXRlU2V0dGluZygiZGlnaXRhbF9hZ2MiLCAidHJ1
        ZSIpCiAgICBpZiBhcmdzLmRpZ2l0YWxfYWdjOgogICAgICAgIHJhZGlvLndy
        aXRlU2V0dGluZygib2Zmc2V0X3R1bmUiLCAidHJ1ZSIpCgoKZGVmIG1haW5f
        aW5pdCgpOgogICAgZ2xvYmFsIHBhdXNlZCwga2lsbGVkLCBmYXRhbAogICAg
        a2lsbGVkID0gRmFsc2UKICAgIGZhdGFsID0gRmFsc2UKICAgIHBhdXNlZCA9
        IGFyZ3MucGF1c2UKCgpkZWYgYnJva2VyX2luaXQoKToKICAgIGdsb2JhbCBi
        cm9rZXIsIHRpbWVmaWxlCiAgICB0aW1lZmlsZSA9IE5vbmUKICAgIGJyb2tl
        ciA9IE5vbmUKICAgIGlmIG5vdCBhcmdzLm5vYnJva2VyOgogICAgICAgIGlu
        Zm8oZiJDb25uZWN0aW5nIHRvIGJyb2tlcjoge2FyZ3MuYnJva2VyfSIpCiAg
        ICAgICAgYnJva2VyID0gbXF0dC5DbGllbnQoKQogICAgICAgIGJyb2tlci5v
        bl9jb25uZWN0ID0gb25fY29ubmVjdAogICAgICAgIGJyb2tlci5vbl9tZXNz
        YWdlID0gb25fbWVzc2FnZQogICAgICAgIGJyb2tlci5jb25uZWN0KGFyZ3Mu
        YnJva2VyLCBhcmdzLnBvcnQsIGFyZ3Mua2VlcGFsaXZlKQogICAgICAgIGJy
        b2tlci5sb29wX3N0YXJ0KCkKCgpkZWYgbWFpbigpOgogICAgYnJva2VyX2lu
        aXQoKQogICAgU29hcHlTRFIucmVnaXN0ZXJMb2dIYW5kbGVyKGxvZ19oYW5k
        bGVyKQogICAgaW5pdGlhbGl6ZWQ9IEZhbHNlCiAgICB3aGlsZSBUcnVlOgog
        ICAgICAgIHRyeToKICAgICAgICAgICAgbWFpbl9pbml0KCkKICAgICAgICAg
        ICAgcmFkaW9fY29ubmVjdCgpCiAgICAgICAgICAgIGlmIG5vdCBpbml0aWFs
        aXplZDoKICAgICAgICAgICAgICAgIHJhZGlvX3NldHRpbmdzKCkKICAgICAg
        ICAgICAgaW5pdGlhbGl6ZWQgPSBUcnVlCiAgICAgICAgICAgIHJhZGlvX3N0
        YXJ0KCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAg
        ICAgIGluZm8oZiJFeGNlcHRpb24gbWFpbigpOiB7ZX0iKQogICAgICAgICAg
        ICB0aW1lLnNsZWVwKHJlc3RhcnRfc2Vjb25kcykKCgpkZWYgY2xvc2VfZmls
        ZShmLCBuYW1lKToKICAgIGlmIGY6CiAgICAgICAgaW5mbyhmIkNsb3Npbmcg
        e25hbWV9IGZpbGUuIikKICAgICAgICBmLmNsb3NlKCkKCgpkZWYgb3Blbl9m
        aWxlcygpOgogICAgZHQgPSBkYXRldGltZS51dGNub3coKQogICAgdHMgPSBk
        dC5zdHJmdGltZSgnJXklbSVkXyVIJU0lUycpCiAgICBmcmVxID0gcmFkaW8u
        Z2V0RnJlcXVlbmN5KFNPQVBZX1NEUl9SWCwgMCkKICAgIGJhc2VuYW1lID0g
        ZiJ7YXJncy5vdXRwdXR9X3t0c31aX3tmcmVxLzFlNjouNmZ9TUh6IgogICAg
        ZXh0ID0gJ3R4dCcKICAgIGZpbGVuYW1lID0gZiJ7YmFzZW5hbWV9LntleHR9
        IgogICAgaW5mbyhmIk9wZW5pbmcge2ZpbGVuYW1lfSBmb3IgZ3BzIHBwcyB0
        aW1lIikKICAgIHRpbWVmaWxlID0gb3BlbihmaWxlbmFtZSwgInciKQogICAg
        ZXh0ID0gJ3JhdycgaWYgYXJncy5ub3dhdmUgZWxzZSAnd2F2JwogICAgZmls
        ZW5hbWUgPSBmIntiYXNlbmFtZX0ue2V4dH0iCiAgICBpbmZvKGYiT3Blbmlu
        ZyB7ZmlsZW5hbWV9IGZvciBhdWRpbyIpCiAgICBhdWRpb2ZpbGUgPSBvcGVu
        KGZpbGVuYW1lLCAid2IiKQogICAgaWYgbm90IGFyZ3Mubm93YXZlOgogICAg
        ICAgIGF1ZGlvZmlsZS53cml0ZSh3YXZfaGVhZGVyKHJhdGU9cmF0ZSkpCiAg
        ICByZXR1cm4gYXVkaW9maWxlLCB0aW1lZmlsZQoKCmRlZiBjbG9zZV9zdHJl
        YW0oc3RyZWFtKToKICAgIGluZm8oZiJDbG9zaW5nIHJhZGlvIHN0cmVhbS4i
        KQogICAgcmFkaW8uZGVhY3RpdmF0ZVN0cmVhbShzdHJlYW0pIAogICAgcmFk
        aW8uY2xvc2VTdHJlYW0oc3RyZWFtKQoKCmRlZiByYWRpb19wZWFrKHBlYWtf
        bGV2ZWwpOgogICAgZGIgPSAiezouMWZ9IGRCIi5mb3JtYXQoMjAgKiBucC5s
        b2cxMChwZWFrX2xldmVsICsgMWUtOTkpKQogICAgaWYgYXJncy5tZXRlcjoK
        ICAgICAgICBidWYgPSBmIntkYn1cbiIgaWYgYXJncy5kdW1iIGVsc2UgZiJc
        MzNbMkt7ZGI6PjlzfVxyIgogICAgICAgIHByaW50KGJ1ZiwgZW5kPSIiLCBm
        aWxlPXN5cy5zdGRlcnIpCiAgICBpZiBicm9rZXI6CiAgICAgICAgYnJva2Vy
        LnB1Ymxpc2goZ2VuX3RvcGljKCJwZWFrIiksIGRiKQoKCmRlZiByYWRpb19z
        dGFydCgpOgogICAgZ2xvYmFsIHJhdGUsIHRpbWVmaWxlLCBzYW1wbGVzX3Rv
        dGFsCiAgICByYXRlID0gcmFkaW8uZ2V0U2FtcGxlUmF0ZShTT0FQWV9TRFJf
        UlgsIDApCiAgICBzaXplID0gYXJncy5wYWNrZXRfc2l6ZQogICAgZGF0YSA9
        IG5wLmFycmF5KFswXSAqIHNpemUgKiAyLCBucC5mbG9hdDMyKQogICAgc3Ry
        ZWFtID0gcmFkaW8uc2V0dXBTdHJlYW0oU09BUFlfU0RSX1JYLCBTT0FQWV9T
        RFJfQ0YzMikKICAgIHJhZGlvLmFjdGl2YXRlU3RyZWFtKHN0cmVhbSkgCiAg
        ICBzYW1wbGVzX3RvdGFsID0gMAogICAgcGVha19sZXZlbCA9IDAKICAgIHNh
        bXBsZV9udW0gPSAwCiAgICBvdXRmaWxlID0gTm9uZQogICAgdHJ5OgogICAg
        ICAgIHdoaWxlIG5vdCBraWxsZWQgYW5kIG5vdCBmYXRhbDoKICAgICAgICAg
        ICAgcmFkaW8ucmVhZFN0cmVhbShzdHJlYW0sIFtkYXRhXSwgc2l6ZSkKICAg
        ICAgICAgICAgaWYgbm90IHBhdXNlZDoKICAgICAgICAgICAgICAgIGlmIG5v
        dCBvdXRmaWxlOgogICAgICAgICAgICAgICAgICAgIG91dGZpbGUsIHRpbWVm
        aWxlID0gb3Blbl9maWxlcygpCiAgICAgICAgICAgICAgICBzYW1wbGVzX3Rv
        dGFsICs9IHNpemUKICAgICAgICAgICAgICAgIG91dGZpbGUud3JpdGUoZGF0
        YSkKICAgICAgICAgICAgcGVha19sZXZlbCA9IG1heChwZWFrX2xldmVsLCBh
        YnMoZGF0YS5taW4oKSksIGFicyhkYXRhLm1heCgpKSkKICAgICAgICAgICAg
        c2FtcGxlX251bSArPSBzaXplCiAgICAgICAgICAgIGlmIHNhbXBsZV9udW0g
        PiByYXRlICogYXJncy5yZWZyZXNoOgogICAgICAgICAgICAgICAgcmFkaW9f
        cGVhayhwZWFrX2xldmVsKQogICAgICAgICAgICAgICAgcGVha19sZXZlbCA9
        IDAKICAgICAgICAgICAgICAgIHNhbXBsZV9udW0gPSAwCiAgICBleGNlcHQg
        KEtleWJvYXJkSW50ZXJydXB0LCBTeXN0ZW1FcnJvcikgYXMgZToKICAgICAg
        ICBpbmZvKGYiRXhjZXB0aW9uIHJhZGlvX3N0YXJ0KCk6IHtlfSIpCiAgICBj
        bG9zZV9maWxlKG91dGZpbGUsICJhdWRpbyIpCiAgICB0aW1lZmlsZSA9IGNs
        b3NlX2ZpbGUodGltZWZpbGUsICJ0aW1lIikKICAgIGNsb3NlX3N0cmVhbShz
        dHJlYW0pCiAgICBpZiBmYXRhbDoKICAgICAgICBpbmZvKCJGYXRhbCBjb21t
        YW5kIGdpdmVuLCBraWxsaW5nIHByb2Nlc3MiKQogICAgICAgIHN5cy5leGl0
        KDEpCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFyZ3MgPSBw
        YXJzZXIucGFyc2VfYXJncygpCiAgICBtYWluKCkKCg==


  - become: yes
    copy:
      mode: 0755
      dest: /usr/local/bin/mqclient
      content: !!binary |
        IyEvdXNyL2Jpbi9weXRob24zCgppbXBvcnQgc3lzCmltcG9ydCBhcmdwYXJz
        ZQppbXBvcnQgcGFoby5tcXR0LmNsaWVudCBhcyBtcXR0CgpwYXJzZXIgPSBh
        cmdwYXJzZS5Bcmd1bWVudFBhcnNlcigKICAgIGZvcm1hdHRlcl9jbGFzcz1h
        cmdwYXJzZS5Bcmd1bWVudERlZmF1bHRzSGVscEZvcm1hdHRlcikKcGFyc2Vy
        LmFkZF9hcmd1bWVudCgiLS1icm9rZXIiLCBkZWZhdWx0PSIxMjcuMC4wLjEi
        LCBoZWxwPSdicm9rZXIgaG9zdCcpCnBhcnNlci5hZGRfYXJndW1lbnQoIi0t
        cG9ydCIsIGRlZmF1bHQ9MTg4MywgaGVscD0nYnJva2VyIHBvcnQnKQpwYXJz
        ZXIuYWRkX2FyZ3VtZW50KCItLWtlZXBhbGl2ZSIsIGRlZmF1bHQ9NjAsIGhl
        bHA9J2Jyb2tlciBrZWVwIGFsaXZlJykKcGFyc2VyLmFkZF9hcmd1bWVudCgi
        LS10b3BpYyIsIGRlZmF1bHQ9ImYvdHgiLCBoZWxwPSdjb21tYW5kIHRvcGlj
        JykKCmRlZiBvbl9jb25uZWN0KGNsaWVudCwgdXNlcmRhdGEsIGZsYWdzLCBy
        Yyk6CiAgICBjbGllbnQuc3Vic2NyaWJlKCIjIikKCmRlZiBvbl9tZXNzYWdl
        KGNsaWVudCwgdXNlcmRhdGEsIG1zZyk6CiAgICBwcmludChtc2cudG9waWMg
        KyAiICIgKyBtc2cucGF5bG9hZC5kZWNvZGUoJ2xhdGluJykpCgpkZWYgbWFp
        bigpOgogICAgY2xpZW50ID0gbXF0dC5DbGllbnQoKQogICAgY2xpZW50Lm9u
        X2Nvbm5lY3QgPSBvbl9jb25uZWN0CiAgICBjbGllbnQub25fbWVzc2FnZSA9
        IG9uX21lc3NhZ2UKICAgIGNsaWVudC5jb25uZWN0KGFyZ3MuYnJva2VyLCBh
        cmdzLnBvcnQsIGFyZ3Mua2VlcGFsaXZlKQogICAgY2xpZW50Lmxvb3Bfc3Rh
        cnQoKQogICAgd2hpbGUgVHJ1ZToKICAgICAgICBsaW5lID0gbmV4dChzeXMu
        c3RkaW4pLnJzdHJpcCgpCiAgICAgICAgY2xpZW50LnB1Ymxpc2goYXJncy50
        b3BpYywgbGluZSkgCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAg
        YXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKCkKICAgIG1haW4oKQoKCg==



  # output directory

  - become: yes
    file: path={{ fs_path }} state=directory owner={{ user }} group={{ user }}

  - become: yes
    copy:
      dest: /lib/systemd/system/mqproxy.service
      content: |
        [Service]
        ExecStart=/usr/bin/python3 -u /usr/local/bin/mqproxy
        Restart=on-failure
        RestartSec=10s
        [Install]
        WantedBy=multi-user.target

  - become: yes
    copy:
      dest: /lib/systemd/system/mqsoapy.service
      content: |
        [Service]
        ExecStart=/usr/bin/python3 -u /usr/local/bin/mqsoapy --pause --output {{ fs_path }}/out
        # WorkingDirectory={{ fs_path }}
        User=george
        Restart=on-failure
        RestartSec=10s
        [Install]
        WantedBy=multi-user.target

  - become: yes
    shell: |
      sudo systemctl enable mqproxy
      sudo systemctl enable mqsoapy

  - become: yes
    shell: |
      sudo systemctl restart mqproxy
      sudo systemctl restart mqsoapy

